{% extends 'base.html' %}
{% block title %}Covach Â· Find your stay{% endblock %}
{% block content %}
<!-- Hero section -->
<section class="relative -mx-4 sm:-mx-6 -mt-8 px-4 sm:px-6 pt-16 pb-20 mb-12 overflow-hidden bg-white border-b border-neutral-200">
  <div class="max-w-7xl mx-auto relative">
    <p class="text-sm uppercase tracking-[0.2em] text-neutral-500 font-semibold">Curated Stays</p>
    <h1 class="font-heading text-4xl sm:text-5xl lg:text-6xl leading-tight mt-3 max-w-2xl">Stay somewhere worthy of the story.</h1>
    <p class="mt-5 text-lg text-neutral-500 max-w-lg">A modern marketplace for refined rentals, from city lofts to country villas.</p>
    <div class="mt-8">{% include 'partials/search_form.html' with enable_htmx=False %}</div>
  </div>
</section>

<!-- Featured listings -->
{% if listings %}
<section>
  <div class="flex items-center justify-between mb-6">
    <h2 class="font-heading text-2xl font-bold">Featured right now</h2>
    <a href="{% url 'search:results' %}" class="text-sm text-blue-600 font-medium hover:text-blue-800 transition">View all &rarr;</a>
  </div>
  <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {% for listing in listings %}
      <a href="{% url 'listings:detail' slug=listing.slug %}" class="card card-hover overflow-hidden group">
        {% with first_photo=listing.photos.first %}
          {% if first_photo %}
            <img src="{{ first_photo.url }}" alt="{{ listing.title }}" class="h-44 w-full object-cover group-hover:scale-[1.02] transition-transform duration-300">
          {% else %}
            <div class="h-44 w-full bg-neutral-100 flex items-center justify-center">
              <svg class="w-10 h-10 text-neutral-300" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819"/></svg>
            </div>
          {% endif %}
        {% endwith %}
        <div class="p-4">
          <div class="flex items-start justify-between gap-2">
            <div>
              <p class="font-semibold group-hover:text-blue-600 transition">{{ listing.title }}</p>
              <p class="text-sm text-neutral-500 mt-0.5">{{ listing.city }}</p>
            </div>
            <p class="font-heading font-bold text-right shrink-0">${{ listing.nightly_rate_usd }}<span class="text-xs text-neutral-400 font-normal">/night</span></p>
          </div>
        </div>
      </a>
    {% endfor %}
  </div>
</section>
{% endif %}
{% endblock %}
