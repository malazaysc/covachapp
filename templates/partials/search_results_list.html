{% if listings %}
  <p class="text-sm text-neutral-400 mb-3 font-medium">{{ listings|length }} listing{{ listings|length|pluralize }} found</p>
{% endif %}
<div class="grid gap-4 sm:grid-cols-2">
  {% for listing in listings %}
    <article class="card card-hover overflow-hidden">
      <!-- Placeholder image area -->
      {% with first_photo=listing.photos.first %}
        {% if first_photo %}
          <img src="{{ first_photo.url }}" alt="{{ listing.title }}" class="h-40 w-full object-cover">
        {% else %}
          <div class="h-40 w-full bg-neutral-100 flex items-center justify-center">
            <svg class="w-10 h-10 text-neutral-300" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.41a2.25 2.25 0 013.182 0l2.909 2.91M3.75 21h16.5A2.25 2.25 0 0022.5 18.75V5.25A2.25 2.25 0 0020.25 3H3.75A2.25 2.25 0 001.5 5.25v13.5A2.25 2.25 0 003.75 21z"/></svg>
          </div>
        {% endif %}
      {% endwith %}
      <div class="p-4">
        <div class="flex items-start justify-between gap-2">
          <div class="min-w-0">
            <div class="flex items-center gap-2 mb-1">
              <span class="badge badge-bronze">{{ listing.get_property_type_display }}</span>
            </div>
            <a href="{% url 'listings:detail' slug=listing.slug %}" class="font-heading text-lg font-bold hover:text-blue-600 transition block truncate">{{ listing.title }}</a>
            <p class="text-sm text-neutral-400 mt-0.5">{{ listing.city }}, {{ listing.country }}</p>
          </div>
          <div class="text-right shrink-0">
            <div class="font-heading text-lg font-bold">${{ listing.nightly_rate_usd }}</div>
            <div class="text-xs text-neutral-400">per night</div>
          </div>
        </div>
        <p class="mt-2 text-sm text-neutral-500 line-clamp-2">{{ listing.description|truncatechars:100 }}</p>
      </div>
    </article>
  {% empty %}
    <div class="sm:col-span-2 card p-8 text-center">
      <svg class="w-12 h-12 text-neutral-300 mx-auto mb-3" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/></svg>
      <p class="text-neutral-400 font-medium">No listings match your filters.</p>
      <p class="text-sm text-neutral-300 mt-1">Try adjusting your search criteria.</p>
    </div>
  {% endfor %}
</div>
